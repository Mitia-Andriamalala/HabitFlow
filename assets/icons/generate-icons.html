<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur d'ic√¥nes PWA - HabitFlow</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: #f8fafc;
        }
        h1 {
            color: #1e293b;
            margin-bottom: 1rem;
        }
        .info {
            background: #e0e7ff;
            border-left: 4px solid #6366f1;
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 0.5rem;
        }
        .preview {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        .icon-preview {
            text-align: center;
        }
        canvas {
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            background: white;
        }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 0.25rem;
            transition: background 0.2s;
        }
        button:hover {
            background: #4f46e5;
        }
        .success {
            background: #10b981;
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            display: none;
        }
        .instructions {
            background: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-top: 2rem;
            border: 1px solid #e2e8f0;
        }
        .instructions h2 {
            margin-top: 0;
            color: #1e293b;
        }
        .instructions ol {
            line-height: 1.8;
            color: #475569;
        }
    </style>
</head>
<body>
    <h1>üé® G√©n√©rateur d'ic√¥nes PWA - HabitFlow</h1>

    <div class="info">
        <strong>‚ÑπÔ∏è Information :</strong> Cet outil g√©n√®re les ic√¥nes PWA n√©cessaires pour HabitFlow.
        Cliquez sur les boutons pour t√©l√©charger chaque ic√¥ne.
    </div>

    <div class="preview">
        <div class="icon-preview">
            <canvas id="canvas-512" width="512" height="512"></canvas>
            <div>
                <button onclick="downloadIcon(512)">üì• T√©l√©charger icon-512.png</button>
            </div>
        </div>

        <div class="icon-preview">
            <canvas id="canvas-192" width="192" height="192"></canvas>
            <div>
                <button onclick="downloadIcon(192)">üì• T√©l√©charger icon-192.png</button>
            </div>
        </div>

        <div class="icon-preview">
            <canvas id="canvas-32" width="32" height="32"></canvas>
            <div>
                <button onclick="downloadIcon(32)">üì• T√©l√©charger favicon.png</button>
            </div>
        </div>
    </div>

    <button onclick="downloadAll()" style="background: #10b981; font-size: 1.1rem;">
        üì¶ T√©l√©charger toutes les ic√¥nes
    </button>

    <div id="success" class="success">
        ‚úÖ Ic√¥nes g√©n√©r√©es avec succ√®s ! N'oubliez pas de les placer dans le dossier assets/icons/
    </div>

    <div class="instructions">
        <h2>üìù Instructions d'installation :</h2>
        <ol>
            <li>Cliquez sur <strong>"T√©l√©charger toutes les ic√¥nes"</strong> ou t√©l√©chargez-les individuellement</li>
            <li>Placez les fichiers t√©l√©charg√©s dans le dossier <code>assets/icons/</code></li>
            <li>Assurez-vous que les noms des fichiers sont corrects :
                <ul>
                    <li><code>icon-512.png</code></li>
                    <li><code>icon-192.png</code></li>
                    <li><code>favicon.png</code></li>
                </ul>
            </li>
            <li>Rechargez votre application et testez l'installation PWA !</li>
        </ol>
    </div>

    <script>
        // SVG de l'ic√¥ne HabitFlow
        const iconSVG = `
            <svg width="SIZE" height="SIZE" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#a855f7;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect width="512" height="512" rx="100" fill="url(#bgGradient)"/>
                <path d="M256 100 L286 190 L380 190 L305 245 L335 335 L256 280 L177 335 L207 245 L132 190 L226 190 Z" fill="white" stroke="white" stroke-width="4" stroke-linejoin="round"/>
                <circle cx="140" cy="140" r="8" fill="white" opacity="0.6"/>
                <circle cx="372" cy="140" r="8" fill="white" opacity="0.6"/>
                <circle cx="140" cy="372" r="8" fill="white" opacity="0.6"/>
                <circle cx="372" cy="372" r="8" fill="white" opacity="0.6"/>
            </svg>
        `;

        function generateIcon(size) {
            const canvas = document.getElementById(`canvas-${size}`);
            const ctx = canvas.getContext('2d');

            const img = new Image();
            const svg = iconSVG.replace(/SIZE/g, size);
            const blob = new Blob([svg], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);

            return new Promise((resolve) => {
                img.onload = function() {
                    ctx.clearRect(0, 0, size, size);
                    ctx.drawImage(img, 0, 0, size, size);
                    URL.revokeObjectURL(url);
                    resolve(canvas);
                };
                img.src = url;
            });
        }

        async function downloadIcon(size) {
            const canvas = await generateIcon(size);
            const filename = size === 32 ? 'favicon.png' : `icon-${size}.png`;

            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);

                document.getElementById('success').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('success').style.display = 'none';
                }, 3000);
            });
        }

        async function downloadAll() {
            await downloadIcon(512);
            await new Promise(resolve => setTimeout(resolve, 500));
            await downloadIcon(192);
            await new Promise(resolve => setTimeout(resolve, 500));
            await downloadIcon(32);
        }

        // G√©n√©rer les aper√ßus au chargement
        window.addEventListener('load', () => {
            generateIcon(512);
            generateIcon(192);
            generateIcon(32);
        });
    </script>
</body>
</html>
